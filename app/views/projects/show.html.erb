<!-- app/views/projects/show.html.erb -->

<div class="container">
  <div class="row">
    <!-- Section 1: Summary of Applicable Regulations -->
    <div class="col-md-6">
      <h2>Résumé des Réglementations Applicables</h2>
      <div id="regulations-summary">
        <% if @regulations.present? %>
          <% @regulations.each do |regulation| %>
            <p>Coefficient d'Occupation des Sols (COS) : <%= regulation.floor_area_ratio %></p>
            <p>Hauteur des Bâtiments : <%= regulation.building_height %> étages</p>
            <p>Logements Sociaux : <%= regulation.housing_social %></p>
            <p>Logements Abordables : <%= regulation.housing_affordable %></p>
            <p>Logements à Prix de Marché : <%= regulation.housing_market_rate %></p>
          <% end %>
        <% else %>
          <p>Aucune réglementation disponible pour cette ville.</p>
        <% end %>
      </div>
    </div>

    <!-- Section 2: City Data -->
    <div class="col-md-6">
      <h2>Données de la Ville</h2>
      <div id="city-data">
        <% if @city.present? %>
          <p>Nom de la Ville : <%= @city.city_name %></p>
          <p>Prix au m² Habitable : <%= @city.price_per_sqm_livable %></p>
          <p>Prix au m² de Terrain : <%= @city.price_per_sqm_land %></p>
          <p>Prix au m² Locatif : <%= @city.price_per_sqm_rental %></p>
        <% else %>
          <p>Aucune donnée disponible pour cette ville.</p>
        <% end %>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-6">
      <!-- Section 3: Project Data -->
      <div class="col-md-12">
        <h2>Données du Projet</h2>
        <div id="project-data">
          <p>Nom du Projet : <%= @project.project_name %></p>
          <p>Nombre de Logements : <%= @project.nb_dwelling %></p>
          <p>Surface du Terrain (m²) : <%= @project.area_sqm_land %></p>
          <p>Surface Habitable (m²) : <%= @project.area_sqm_livable %></p>
          <p>Coefficient d'Occupation des Sols (COS) : <%= @project.floor_area_ratio %></p>
        </div>
      </div>
    </div>

    <!-- Section 4: Launch Simulation -->
    <div class="col-md-6">
      <h2>Lancer une Simulation</h2>
      <%= form_with(url: project_simulations_path(@project), method: :post) do |form| %>
        <div class="mb-3">
          <%= form.label :unit_cost, "Coût Unitaire de Construction / Démolition (par m²)" %>
          <%= form.number_field :unit_cost, class: "form-control" %>
        </div>
        <%= form.submit "Lancer la Simulation", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>
</div>
