<div class="simulation-container">
  <h2> Votre potentiel immobilier en chiffres </h2>

  <div class="simulation-row">
    <div class="simulation-col simulation-col-1">
      <p><strong><%= price_ratio = number_with_precision(@simulation.price_total_livable/(@city.price_per_sqm_livable * @project.area_sqm_livable), precision: 1, delimiter: ' ') %>x</strong></p>
    </div>
    <div class="simulation-col simulation-col-2">
      <p>
        <strong><%= price_total_livable = number_with_precision(@simulation.price_total_livable, precision: 0, delimiter: ' ') %>€</strong>
        en valeur foncière soit <strong><%= price_ratio %>x</strong> la valeur initiale de votre bien !
      </p>
    </div>
  </div>

  <div class="simulation-row">
    <div class="simulation-col simulation-col-1">
      <p><strong><%= rental_return_simul = number_with_precision(@simulation.price_total_rental / @simulation.price_total_livable * 100, precision: 2, delimiter: ' ') %>%</strong></p>
    </div>
    <div class="simulation-col simulation-col-2">
      <p>
        <strong><%= price_total_rental = number_with_precision(@simulation.price_total_rental, precision: 0, delimiter: ' ') %>€</strong>
        en valeur locative annualisée soit un taux de rendement brut de <strong><%= rental_return_simul %>%</strong>
        contre <%= rental_return_project = number_with_precision((@city.price_per_sqm_rental * 12) / @city.price_per_sqm_livable * 100, precision: 2, delimiter: ' ') %>% initialement !
      </p>
    </div>
  </div>

  <div class="simulation-row">
    <div class="simulation-col simulation-col-1">
      <p>
        <% roi = ((@simulation.price_total_livable - @simulation.cost_destruction) / @simulation.cost_destruction - 1) * 100 %>
        <strong>
          <%= roi > 0 ? "+" : roi < 0 ? "-" : "" %><%= number_with_precision(roi.abs, precision: 0, delimiter: ' ') %>%
        </strong>
      </p>
    </div>
    <div class="simulation-col simulation-col-2">
      <p>
        Dans l'hypothèse d'une vente totale, le retour sur investissement de votre projet immobilier serait de
        <strong><%= roi > 0 ? "+" : roi < 0 ? "-" : "" %><%= number_with_precision(roi.abs, precision: 0, delimiter: ' ') %>%</strong>
        sur la base d'un investissement initial de <strong><%= number_with_precision(@simulation.cost_destruction, precision: 0, delimiter: ' ') %>€</strong>
        (démolition et construction) et représentant une plus-value immobilière potentielle de
        <strong>+<%= number_with_precision(@simulation.price_total_livable - @simulation.cost_destruction, precision: 0, delimiter: ' ') %>€</strong>
        sur une période pouvant aller de 1 à 2 ans seulement !
      </p>
    </div>
  </div>

  <div class="simulation-row">
    <div class="simulation-col simulation-col-1">
      <p>
        <strong><%= number_with_precision(@simulation.area_sqm_livable, precision: 0, delimiter: ' ') %> m²</strong>
        (<%= @simulation.area_sqm_livable - @simulation.project.area_sqm_livable >= 0 ? "+" : "" %><%= number_with_precision(@simulation.area_sqm_livable - @simulation.project.area_sqm_livable, precision: 0, delimiter: ' ') %> m²)
      </p>
    </div>
    <div class="simulation-col simulation-col-2">
      <p>Content for the second column, fourth row</p>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="d-flex justify-content-between mt-4">
    <%= link_to 'Retour au Projet', project_path(@simulation.project), class: 'btn btn-primary' %>
    <%= form_with model: [@simulation.project, @simulation], url: save_project_simulation_path(@simulation.project, @simulation), method: :post, local: true do |form| %>
      <%= form.hidden_field :area_sqm_livable %>
      <%= form.hidden_field :price_total_livable %>
      <%= form.hidden_field :price_total_rental %>
      <%= form.hidden_field :cost_destruction %>
      <%= form.hidden_field :area_sqm_land %>
      <%= form.hidden_field :floor_area_ratio %>
      <%= form.hidden_field :area_sqm_construction %>
      <%= form.hidden_field :area_sqm_common %>
      <%= form.hidden_field :building_height_floors %>
      <%= form.submit 'Sauvegardez votre simulation', class: 'btn btn-success' %>
    <% end %>
  </div>
</div>
